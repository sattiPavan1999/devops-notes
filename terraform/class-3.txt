
If we are using vs code then
1. Setup ssh connection
2. Go to open new folder and select ec2-user path and run this in terminal :    sudo chmod 777 /root
3. It is give permissions to root user
4. Now we can continue to install terraform in root user as we know


If you want to do it on root Go to root and

1. sudo -i 

1. sudo yum install -y yum-utils shadow-utils
2. sudo yum-config-manager --add-repo https://rpm.releases.hashicorp.com/AmazonLinux/hashicorp.repo
3. sudo yum install terraform
(Install terraform)

4. mkdir myfiles
5. cd myfiles
6. vim  provider.tf
(
provider "aws" {
  region = "ap-south-1"
}
)

7. vim  resource.tf
(
resource "aws_instance" "myserver" {

  tags = {
    Name        = var.iname[count.index]
    Environment = "Dev"
    Client      = "flm"
  }

  ami = "ami-00ca570c1b6d79f36"

  instance_type = "t2.micro"

  key_name = "new-mac-key"

  count = var.icount
}
)

1. vim variable.tf
(
variable "iname" {
    type = list(string)
    default = ["server-1", "server-2", "server-3"]
}

variable "icount" {
    type = number
    default = 3
}
)
(We can set the name of the instances as "server-1", "server-2", "server-3")

2.  vim output.tf
(
output "myoutput" {
    value = [aws_instance.myserver[0].public_ip,
    aws_instance.myserver[1].private_ip,
    aws_instance.myserver[2].public_dns]
}
)
(We can see the output of the following)
(Here myserver is the label)

3. terraform init
4. terraform plan
5. terraform apply —auto-approve
6. terraform destroy --auto-approve






create security group through terraform

5. cd myfiles
6. vim  provider.tf
(
provider "aws" {
  region = "ap-south-1"
}
)

7. vim security.tf
(
resource "aws_security_group" "mysg" {
    name = "terraform-sg-2"
    description = "it is created using tf"

    ingress {
        protocol = "tcp"
        from_port = 22
        to_port = 22
        cidr_blocks = ["0.0.0.0/0"]

    }

    ingress {
        protocol = "tcp"
        from_port = 80
        to_port = 80
        cidr_blocks = ["0.0.0.0/0"]
    }

    ingress {
        protocol = "tcp"
        from_port = 8080
        to_port = 8081
        cidr_blocks = ["0.0.0.0/0"]
    }

    egress {
        protocol = "-1"
        from_port = 0
        to_port = 0
        cidr_blocks = ["0.0.0.0/0"]
    }
}
)
(Here ingress means inbound rules, egress means outbound rules)

7. vim  resource.tf
(
resource "aws_instance" "myserver" {

  tags = {
    Name        = "server-1"
    Environment = "Dev"
    Client      = "flm"
  }

  ami = "ami-00ca570c1b6d79f36"

  instance_type = "t2.micro"

  key_name = "new-mac-key"

  vpc_security_group_ids = [aws_security_group.mysg.id]
}
)

4. terraform plan
5. terraform apply —auto-approve
